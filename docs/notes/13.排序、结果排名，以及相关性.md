这是一个很大的问题：

- PageRank
- 竞价排名
- 信息流排序
- 点击量预估
- ...

ElasticSearch默认使用`TF-IDF`计算公式来排序。

**TF: Term Frequency, 词频**

某个词(token)在某篇文档中的词频为：

$$
TF = \frac{文档中这个词的数量}{文档中的总的词数}
$$

**IDF: inverse document frequency, 逆文档频率**

某个词的逆文档频率为

$$
IDF = lg\frac{文档总数}{包含这个词的文档数量}
$$

**TF-IDF计算公式**

$$
TF-IDF = TF \times IDF
$$

**例子**

假如一篇文件的总词语数是100个，而词语“母牛”出现了3次，那么“母牛”一词在该文件中的词频就是3/100=0.03。而计算文件频率（IDF）的方法是以文件集的文件总数，除以出现“母牛”一词的文件数。所以，如果“母牛”一词在1,000份文件出现过，而文件总数是10,000,000份的话，其逆向文件频率就是lg（10,000,000 / 1,000）=4。最后的tf-idf的分数为0.03 * 4=0.12。

tf-idf分数越高的文档，排名越靠前。